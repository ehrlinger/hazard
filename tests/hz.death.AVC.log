6601     OPTIONS PAGESIZE=100 LINESIZE=132;
6602   *******************************************************************************;

6603   * !HZEXAMPLES/hz.death.AVC                                                     ;

6604   *                                                                              ;

6605   * Death after repair of atrioventricular septal defects                        ;

6606   *******************************************************************************;

6607   * Bring in data                                                                ;

6608     TITLE1 'Repair of Atrioventricular Septal (A-V Canal) Defects';
6609     TITLE2 'Example Data Set';
6610     TITLE3 'Death After Repair';
6611     TITLE4 'Determnine Hazard Function';
6612   *______________________________________________________________________________;

6613   *                                                                              ;

6614   * NOTE:  Normally this would be a SAS data set, probably built from the raw    ;

6615   *        data.  For illustration, a few variables from a data set for repair   ;

6616   *        of atrioventricular septal defects will be read from a "flat file."   ;

6617   *______________________________________________________________________________;

6618   *                                                                              ;

6619     FILENAME INAVC ('!HZEXAMPLES/data/avc');
6620     DATA AVCS; INFILE INAVC MISSOVER;
6621     INPUT STUDY $ STATUS INC_SURG OPMOS AGE MAL COM_IV ORIFICE DEAD INT_DEAD

6622           OP_AGE;
6623     LABEL
6624           STUDY    = 'Study number'
6625           STATUS   = 'Clinical status (NYHA I-V)'
6626           INC_SURG = 'Surgical grade of AV valve incompetence'
6627           OPMOS    = 'Date of operation (months since 1/67)'
6628           AGE      = 'Age (months) at repair'
6629           MAL      = 'Important associated cardiac anomaly'
6630           COM_IV   = 'Interventricular communication'
6631           ORIFICE  = 'Accessory left AV valve orifice'
6632           DEAD     = 'Death'
6633           INT_DEAD = 'Followup interval (months) after repair'
6634     ;
6635     KEEP INT_DEAD DEAD;
6636   *******************************************************************************;

6637   * Estimate parameters of the distribution of the event                         ;

6638     LIBNAME EXAMPLES ('!HZEXAMPLES/sasest');
NOTE: Libref EXAMPLES was successfully assigned as follows:
      Levels:           1
      Engine(1):        V8
      Physical Name(1): c:\hazard\examples\sasest
6639   *options mprint mlogic;
6640     %let hzrdelds = 1;
6641     %HAZARD(
6642     PROC HAZARD DATA=AVCS CONSERVE P OUTHAZ=EXAMPLES.HZDEATH
6643          STEEPEST QUASI CONDITION=14;
6644          EVENT DEAD;
6645          TIME INT_DEAD;
6646          PARMS MUE=0.2361727 THALF=0.1512095 NU=1.438652 M=1 FIXM
6647                MUC=0.0005436977;
6648   *      PARMS MUE=0.25 THALF=0.15 NU=1  M=1  MUC=0.0005;
6649   *      PARMS MUE=0.25 THALF=0.15 NU=-1 M=1  MUC=0.0005;
6650   *      PARMS MUE=0.25 THALF=0.15 NU=1  M=-1 MUC=0.0005;
6651     );

NOTE: The infile INAVC is:
      File Name=c:\hazard\examples\data\avc,
      RECFM=V,LRECL=256

NOTE: 310 records were read from the infile INAVC.
      The minimum record length was 49.
      The maximum record length was 56.
NOTE: The data set WORK.AVCS has 310 observations and 2 variables.
NOTE: DATA statement used:
      real time           0.18 seconds
      cpu time            0.18 seconds


Running hazard c:\hazard\bin\hazard.bat on Windows with data C:\WINNT\TEMP\hzr.J1660.X508

Note: Procedure HAZARD (C-Version 4.1.0)
      The Cleveland Clinic Foundation
      9500 Euclid Avenue
      Cleveland, Ohio 44195
      Phone: (216) 444-6712
      Email: hazard@bio.ri.ccf.org
Note: RCENSOR has been changed from 0 to 1 in one or more observations.
Note: Procedure HAZARD completed successfully.

NOTE: There were 17 observations read from the data set HZRCALL.HZRCALL.
NOTE: The data set EXAMPLES.HZDEATH has 17 observations and 14 variables.
NOTE: DATA statement used:
      real time           0.03 seconds
      cpu time            0.03 seconds


6652   *______________________________________________________________________________;

6653   *                                                                              ;

6654   * NOTE:  Normally the cumulative hazard function plot will help in determining ;

6655   *        the number of phases and the starting values for parameters, as       ;

6656   *        described in the documentation.                                       ;

6657   *                                                                              ;

6658   *        Then, for the early phase, we have explored the 3 branches:           ;

6659   *              NU>0, M>0                                                       ;

6660   *              NU<0, M>0                                                       ;

6661   *              NU>0, M<0                                                       ;

6662   *        as seen above by the commented out PARMS statements.  We did this     ;

6663   *        with the plotting stuff below all excluded by /*  */ s.  This job,    ;

6664   *        then, represents the final output of our explorations.  We chose      ;

6665   *        to use STEEPEST QUASI, but the algorithm QUASI would have served      ;

6666   *        as well.  These explorations revealed that for NU>0, M>0, M was not   ;

6667   *        different from 1 (LL -210.5).  For NU<0, M>0, M also was not different;

6668   *        from 1 (LL -210.5), as we might expect, since these branches converge ;

6669   *        when M=1.  For NU>0, M<0, NU is tending toward 2 (LL -210.8).  We     ;

6670   *        have chosen as the final model NU>0, M=1.                             ;

6671   *                                                                              ;

6672   *        An early phase alone has a LL of -215, so the constant phase is       ;

6673   *        needed.                                                               ;

6674   *______________________________________________________________________________;

6675   *                                                                              ;

6676   *******************************************************************************;

6677   * Plot various survival functions                                              ;

6678     FILENAME HAZPLOT ('!MACROS/hazplot.sas');
6679     OPTIONS NOSOURCE; %INC HAZPLOT; OPTIONS SOURCE;
7008     %HAZPLOT(INTERVAL=INT_DEAD,EVENT=DEAD,IN=AVCS,INEST=EXAMPLES.HZDEATH,
7009              PDETAIL=1, PLOTI=1, HLABEL=Months After Repair,
7010              ELABEL=Death After Repair);

NOTE: There were 310 observations read from the data set WORK.AVCS.
NOTE: The data set WORK.AVCS has 310 observations and 3 variables.
NOTE: DATA statement used:
      real time           0.02 seconds
      cpu time            0.02 seconds



NOTE: There were 310 observations read from the data set WORK.AVCS.
NOTE: The data set WORK._REFINE_ has 310 observations and 3 variables.
NOTE: DATA statement used:
      real time           0.03 seconds
      cpu time            0.03 seconds



NOTE: There were 310 observations read from the data set WORK._REFINE_.
NOTE: The data set WORK._REFINE_ has 310 observations and 9 variables.
NOTE: DATA statement used:
      real time           0.03 seconds
      cpu time            0.03 seconds


NOTE: There were 310 observations read from the data set WORK._REFINE_.
NOTE: The data set WORK.OUTTEST has 1 observations and 3 variables.
NOTE: PROCEDURE SUMMARY used:
      real time           0.02 seconds
      cpu time            0.02 seconds


NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      59812:195
NOTE: There were 1 observations read from the data set WORK.OUTTEST.
NOTE: The data set WORK.OUTTEST has 1 observations and 3 variables.
NOTE: DATA statement used:
      real time           0.02 seconds
      cpu time            0.02 seconds


NOTE: There were 310 observations read from the data set WORK._REFINE_.
NOTE: The data set WORK.S1 has 1 observations and 8 variables.
NOTE: PROCEDURE SUMMARY used:
      real time           0.02 seconds
      cpu time            0.02 seconds



NOTE: There were 1 observations read from the data set WORK.S1.
NOTE: The data set WORK.S1 has 1 observations and 9 variables.
NOTE: DATA statement used:
      real time           0.02 seconds
      cpu time            0.02 seconds



NOTE: There were 1 observations read from the data set WORK.S1.
NOTE: The data set WORK.NSET has 1 observations and 2 variables.
NOTE: DATA statement used:
      real time           0.02 seconds
      cpu time            0.02 seconds


NOTE: There were 310 observations read from the data set WORK._REFINE_.
NOTE: The data set WORK.BASIC1 has 273 observations and 7 variables.
NOTE: PROCEDURE SUMMARY used:
      real time           0.02 seconds
      cpu time            0.02 seconds


NOTE: Deleting WORK._REFINE_ (memtype=DATA).
NOTE: PROCEDURE DELETE used:
      real time           0.01 seconds
      cpu time            0.01 seconds



NOTE: There were 273 observations read from the data set WORK.BASIC1.
NOTE: The data set WORK.BASIC has 273 observations and 8 variables.
NOTE: DATA statement used:
      real time           0.02 seconds
      cpu time            0.02 seconds


NOTE: Deleting WORK.BASIC1 (memtype=DATA).
NOTE: PROCEDURE DELETE used:
      real time           0.02 seconds
      cpu time            0.02 seconds



NOTE: There were 273 observations read from the data set WORK.BASIC.
NOTE: There were 1 observations read from the data set WORK.NSET.
NOTE: The data set WORK.KAPLAN has 273 observations and 28 variables.
NOTE: DATA statement used:
      real time           0.03 seconds
      cpu time            0.03 seconds



NOTE: Deleting WORK.BASIC (memtype=DATA).
NOTE: Deleting WORK.S1 (memtype=DATA).
NOTE: Deleting WORK.NSET (memtype=DATA).
NOTE: PROCEDURE DELETE used:
      real time           0.04 seconds
      cpu time            0.04 seconds



NOTE: There were 273 observations read from the data set WORK.KAPLAN.
NOTE: The data set WORK.PLOUT has 273 observations and 28 variables.
NOTE: DATA statement used:
      real time           0.03 seconds
      cpu time            0.03 seconds



NOTE: Deleting WORK.KAPLAN (memtype=DATA).
NOTE: PROCEDURE DELETE used:
      real time           0.01 seconds
      cpu time            0.01 seconds



NOTE: There were 273 observations read from the data set WORK.PLOUT.
NOTE: The data set WORK.PLOUT has 273 observations and 14 variables.
NOTE: DATA statement used:
      real time           0.02 seconds
      cpu time            0.02 seconds



NOTE: There were 273 observations read from the data set WORK.PLOUT.
NOTE: The data set WORK.PLOUT has 273 observations and 16 variables.
NOTE: DATA statement used:
      real time           0.03 seconds
      cpu time            0.03 seconds


Running hazpred c:\hazard\bin\hazpred.bat on Windows with data C:\WINNT\TEMP\hzp.J1660.X518

Note: Procedure HAZPRED (C-Version 4.1.0)
      DEBUGGING VERSION
      The Cleveland Clinic Foundation
      9500 Euclid Avenue
      Cleveland, Ohio 44195
      Phone: (216) 444-6712
      Email: hazard@bio.ri.ccf.org
Note: Procedure HAZPRED completed successfully.

NOTE: There were 273 observations read from the data set HZRCALL.HZRCALL.
NOTE: The data set WORK.PREDICT has 273 observations and 28 variables.
NOTE: DATA statement used:
      real time           0.02 seconds
      cpu time            0.02 seconds



NOTE: Invalid argument to function LOG at line 36 column 15.
NOTE: Invalid argument to function LOG at line 36 column 43.
NOTE: Invalid argument to function LOG at line 36 column 67.
INT_DEAD=170.5826 DEAD=1 CENSORED=0 NUMBER=1 CUM_SURV=0 LIFE=79.040605296 PROPLIFE=0.4633567861 SE_EXACT=0 CL_LOWER=0 CL_UPPER=0
CUM_HAZ=. HAZARD=. DENSITY=0.0164435258 MID_INT=149.2762 NOBS=310 TOTAL=1 _SURVIV=0.7209772917 _CLLSURV=0.6846875658
_CLUSURV=0.7545874155 _EARLYS=0.7910453317 _CONSTS=0.9114234834 _LATES=1 _HAZARD=0.000550874 _CLLHAZ=0.0003519175
_CLUHAZ=0.0008623105 _EARLYH=7.16301E-6 _CONSTH=0.000543711 _LATEH=0 PLTCHR=+ PLTCL=- PLTPAR=* LN_TIME=5.1392196369
D_SURVIV=-0.720977292 _LNHAZ=-7.504004451 _LNCLLHZ=-7.952113809 _LNCLUHZ=-7.055895094 _EARLYR=1.3002991536 _CONSTR=98.699700846
_LATER=0 CLL_CHZ=. CLU_CHZ=. _CUMHAZ=0.3271476378 _CLLCHZ=0.2815841486 _CLUCHZ=0.3787926531 D_CUMHAZ=. LN_CHAZ_=.
LN_CUMHZ=-1.117343718 _LNCLLCH=-1.267323947 _LNCLUCH=-0.970766313 LN_CLLCH=. LN_CLUCH=. S_CUMHAZ=70.000000776 TDEAD=70
SECUMHAZ=63.072156576 SCCUMHAZ=6.9278442002 SLCUMHAZ=0 UNIQUE=310 T_CUMHAZ=0.3271476378 TECUMHAZ=0.2344000035 TCCUMHAZ=0.0927476342
TLCUMHAZ=0 NEHAZ=0.0130029915 NCHAZ=0.9869970085 NLHAZ=0 SUM_CHF=70.000000776 SUMECHF=63.072156576 SUMCCHF=6.9278442002 SUMLCHF=0
D_DEAD=7.7601143E-7 _EARLYC=0.2344000035 LN_EARLC=-1.450726206 P_EARLY=1 _CONSTC=0.0927476342 LN_CONSC=. P_CONST=1 _LATEC=0
LN_LATEC=. P_LATE=0 R_EARLYC=. R_CONSTC=. R_LATEC=. LN_EC=. LN_CC=. LN_LC=. _ERROR_=1 _N_=273
NOTE: Missing values were generated as a result of performing an operation on missing values.
      Each place is given by: (Number of times) at (Line):(Column).
      1 at 36:15    1 at 36:43    1 at 36:67    1 at 38:24    1 at 79:114   1 at 79:122   1 at 79:151   1 at 79:159   1 at 79:187
      1 at 79:195
NOTE: Mathematical operations could not be performed at the following places. The results of the operations have been set to
      missing values.
      Each place is given by: (Number of times) at (Line):(Column).
      1 at 36:15   1 at 36:43   1 at 36:67
NOTE: There were 273 observations read from the data set WORK.PREDICT.
NOTE: The data set WORK.PREDICT has 273 observations and 84 variables.
NOTE: DATA statement used:
      real time           0.09 seconds
      cpu time            0.09 seconds



NOTE: There were 273 observations read from the data set WORK.PREDICT.
NOTE: The data set WORK.OUTTEST has 1 observations and 5 variables.
NOTE: PROCEDURE SUMMARY used:
      real time           0.02 seconds
      cpu time            0.02 seconds



NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      86:11   86:47   86:82
NOTE: There were 1 observations read from the data set WORK.OUTTEST.
NOTE: The data set WORK.OUTTEST has 1 observations and 5 variables.
NOTE: DATA statement used:
      real time           0.02 seconds
      cpu time            0.02 seconds



NOTE: There were 273 observations read from the data set WORK.PREDICT.
NOTE: PROCEDURE PLOT used:
      real time           0.12 seconds
      cpu time            0.12 seconds



NOTE: There were 273 observations read from the data set WORK.PREDICT.
NOTE: The data set WORK.PREDICT has 273 observations and 84 variables.
NOTE: DATA statement used:
      real time           0.03 seconds
      cpu time            0.03 seconds



NOTE: There were 273 observations read from the data set WORK.PREDICT.
NOTE: PROCEDURE MEANS used:
      real time           0.06 seconds
      cpu time            0.02 seconds



NOTE: There were 273 observations read from the data set WORK.PREDICT.
NOTE: The data set WORK.PREDICT has 44 observations and 85 variables.
NOTE: DATA statement used:
      real time           0.03 seconds
      cpu time            0.03 seconds


7202   *******************************************************************************;

7203   * Digital nomogram                                                             ;


NOTE: There were 44 observations read from the data set WORK.PREDICT.
NOTE: PROCEDURE PLOT used:
      real time           0.02 seconds
      cpu time            0.02 seconds


7204     DATA DIG;
7205     DTY=12/365.2425;
7206     DO MONTHS=1*DTY,2*DTY,3*DTY,4*DTY,5*DTY,6*DTY,7*DTY,14*DTY,30*DTY,
7207     1,2,3,6,12,18,24 TO 180 BY 12;
7208       YEARS=MONTHS/12;
7209       OUTPUT;
7210     END;
7211     %HAZPRED(
7212     PROC HAZPRED DATA=DIG INHAZ=EXAMPLES.HZDEATH OUT=DIG; TIME MONTHS;
7213     );

NOTE: The data set WORK.DIG has 29 observations and 3 variables.
NOTE: DATA statement used:
      real time           0.03 seconds
      cpu time            0.03 seconds


Running hazpred c:\hazard\bin\hazpred.bat on Windows with data C:\WINNT\TEMP\hzp.J1660.X526

Note: Procedure HAZPRED (C-Version 4.1.0)
      DEBUGGING VERSION
      The Cleveland Clinic Foundation
      9500 Euclid Avenue
      Cleveland, Ohio 44195
      Phone: (216) 444-6712
      Email: hazard@bio.ri.ccf.org
Note: Procedure HAZPRED completed successfully.

NOTE: There were 29 observations read from the data set HZRCALL.HZRCALL.
NOTE: The data set WORK.DIG has 29 observations and 15 variables.
NOTE: DATA statement used:
      real time           0.02 seconds
      cpu time            0.01 seconds


7214     PROC PRINT D; VAR MONTHS YEARS
7215          _SURVIV _CLLSURV _CLUSURV _HAZARD _CLLHAZ _CLUHAZ;
7216   *******************************************************************************;

7217   RUN;

NOTE: There were 29 observations read from the data set WORK.DIG.
NOTE: PROCEDURE PRINT used:
      real time           0.02 seconds
      cpu time            0.02 seconds


